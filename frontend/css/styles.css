:root {
  /* Definici√≥n de variables CSS para consistencia y f√°cil ajuste */
  --primary-color: #2c3e50;
  --secondary-color: #3498db; /* Azul para √©nfasis en formularios */
  --accent-color: #ecf0f1;
  --danger-color: #c0392b;
  --success-color: #2ecc71;

  --text-color: #333;
  --background-light: #f4f4f4;
  --background-white: #ffffff;

  --border-color: #ccc;
  --shadow-light: rgba(0, 0, 0, 0.05);
  --shadow-medium: rgba(0, 0, 0, 0.1);
  --shadow-dark: rgba(0, 0, 0, 0.5);

  /* Espaciado basado en rem, asumiendo 1rem = 16px */
  --space-xxs: 0.25rem; /* 4px */
  --space-xs: 0.5rem; /* 8px */
  --space-sm: 0.75rem; /* 12px */
  --space-md: 1rem; /* 16px */
  --space-lg: 1.25rem; /* 20px */
  --space-xl: 1.5rem; /* 24px */
  --space-xxl: 2rem; /* 32px */
  --space-xxxl: 3rem; /* 48px */

  /* Border-radius */
  --border-radius-sm: 0.3125rem; /* 5px */
  --border-radius-md: 0.625rem; /* 10px */
  --border-radius-lg: 1.25rem; /* 20px */

  /* Anchos m√°ximos para el contenido principal (para evitar que se estire demasiado en pantallas muy grandes) */
  /* NOTA: Estos valores ser√°n reemplazados para .contenido en media queries grandes si se quiere que se estire al 100% */
  --max-content-width-desktop: 90rem; /* 1440px */
  --max-content-width-large-desktop: 100rem; /* 1600px */
}

/* ------------------------------------------- */
/* BASE STYLES & GENERAL LAYOUT (PARA MOBILE-FIRST O VALORES POR DEFECTO) */
/* ------------------------------------------- */

body {
  font-family: "Segoe UI", sans-serif;
  margin: 0;
  background: var(--background-light);
  color: var(--text-color);
  font-size: 1rem; /* Base font size, all rem units will scale from here */
  min-height: 100vh; /* Asegura que el body ocupe al menos el 100% del viewport height */
  display: flex; /* Permite que el layout flex se estire en altura */
  flex-direction: column;
}

.layout {
  display: flex;
  flex: 1; /* Permite que el layout ocupe el espacio restante */
  flex-direction: column; /* Por defecto, apila en columnas para m√≥vil */
  min-height: 100vh; /* Asegura que ocupe al menos la altura del viewport */
}

.sidebar {
  width: 100%; /* Por defecto, sidebar de ancho completo para m√≥vil */
  background: var(--primary-color);
  color: white;
  padding: var(--space-md) var(--space-sm); /* 16px 12px */
  box-sizing: border-box;
  flex-shrink: 0;
  text-align: center; /* Centra el texto del sidebar en m√≥viles */
}

.sidebar h2 {
  font-size: 1.25rem; /* 20px */
  margin-bottom: var(--space-md); /* 16px */
}

.sidebar ul {
  list-style: none;
  padding-left: 0;
  margin: 0;
  display: flex;
  justify-content: center; /* Centra los elementos del men√∫ en m√≥vil */
  flex-wrap: wrap; /* Permite que los elementos se envuelvan */
  gap: var(--space-md); /* Espacio entre los elementos del men√∫ */
}

.sidebar li {
  margin: 0; /* Elimina el margen vertical redundante con gap */
}

.sidebar a {
  color: white;
  text-decoration: none;
  font-size: 0.95rem;
  padding: var(--space-xs) var(--space-sm); /* A√±adir padding para √°reas de clic m√°s grandes */
  display: block; /* Para que el padding funcione bien */
}

.sidebar a.active,
.sidebar a:hover {
  text-decoration: underline;
  background-color: rgba(
    255,
    255,
    255,
    0.1
  ); /* Ligero fondo al pasar el rat√≥n */
  border-radius: var(--border-radius-sm);
}

main {
  flex: 1; /* Ocupa el espacio restante en la columna */
  display: flex;
  flex-direction: column;
}

.topbar {
  background: var(--accent-color);
  padding: var(--space-md); /* 16px */
  box-shadow: 0 0.125rem 0.25rem var(--shadow-light); /* 2px 4px */
}

.topbar-content {
  display: flex;
  flex-direction: column; /* Por defecto, apila para m√≥vil */
  align-items: flex-start;
  /* max-width: var(--max-content-width-desktop);  ELIMINADO */
  margin: 0 auto; /* Centra el contenido */
  padding: 0 var(--space-md); /* Padding horizontal para evitar que toque los bordes */
  width: 100%; /* Asegura que ocupe todo el ancho disponible */
}

.topbar-content h1 {
  font-size: 1.5rem; /* 24px */
  margin: 0 0 var(--space-xs) 0; /* Margen inferior para separar del logout en m√≥vil */
}

.logout {
  background: var(--danger-color);
  color: white;
  border: none;
  padding: 0.5rem 0.9375rem; /* 8px 15px */
  border-radius: var(--border-radius-sm); /* 5px */
  cursor: pointer;
  font-size: 0.9rem;
}

.contenido {
  padding: var(--space-md); /* 16px, padding m√°s peque√±o por defecto */
  overflow-y: auto;
  flex-grow: 1;
  max-width: 100%; /* Por defecto, ocupa todo el ancho disponible */
  margin: 0 auto; /* Centra en el espacio disponible */
  box-sizing: border-box; /* Asegura que el padding no cause desbordamiento */
}

.contenido h2 {
  font-size: 1.5rem; /* 24px */
  margin-bottom: var(--space-xl); /* 24px */
}

/* ------------------------------------------- */
/* Estilos para la p√°gina de "listaEjercicios.html" */
/* ------------------------------------------- */

#filtros {
  display: flex;
  flex-direction: column; /* Apila los filtros por defecto (m√≥vil) */
  gap: var(--space-md); /* 16px */
  background: var(--background-white);
  padding: var(--space-lg); /* 20px */
  margin-bottom: var(--space-xl); /* 24px */
  border-radius: var(--border-radius-sm); /* 8px */
  box-shadow: 0 0.125rem 0.3125rem var(--shadow-light); /* 2px 5px */
  align-items: stretch; /* Estira los elementos para ocupar el ancho */
}

#filtros label {
  font-weight: bold;
  margin-right: 0; /* Eliminar margen derecho cuando se apilan */
  font-size: 0.95rem;
}

#filtros select,
#filtros input {
  padding: var(--space-xs); /* 8px */
  border: 0.0625rem solid var(--border-color); /* 1px */
  border-radius: var(--border-radius-sm); /* 5px */
  font-size: 0.9rem;
  width: 100%; /* Ocupa todo el ancho disponible */
  max-width: none; /* Elimina cualquier max-width anterior */
  box-sizing: border-box;
}

#filtros button {
  background: var(--primary-color);
  color: white;
  border: none;
  padding: 0.5rem 0.9375rem; /* 8px 15px */
  border-radius: var(--border-radius-sm); /* 5px */
  cursor: pointer;
  font-size: 0.9rem;
  width: 100%; /* Ocupa todo el ancho */
  box-sizing: border-box;
}

#lista-ejercicios {
  display: grid;
  grid-template-columns: 1fr; /* Una sola columna para m√≥viles */
  gap: var(--space-xl); /* 24px */
}

.ejercicio {
  background: var(--background-white);
  padding: var(--space-lg); /* 20px */
  border-radius: var(--border-radius-md); /* 10px */
  box-shadow: 0 0.125rem 0.375rem var(--shadow-medium); /* 2px 6px */
  transition: transform 0.2s ease;
  cursor: pointer;
}

.ejercicio:hover {
  transform: scale(1.02);
}

.ejercicio-contenido {
  display: flex;
  flex-direction: column; /* Apila imagen y texto en m√≥vil */
  gap: var(--space-md); /* 16px */
  align-items: center; /* Centra el contenido apilado */
  text-align: center;
}

.ejercicio-texto {
  flex: 1;
  width: 100%; /* Ocupa todo el ancho disponible */
}

.ejercicio-texto h3 {
  font-size: 1.15rem; /* 18.4px */
  margin-top: 0;
  margin-bottom: var(--space-xs); /* 8px */
}

.ejercicio-texto p {
  font-size: 0.875rem; /* 14px */
  margin-bottom: var(--space-xs); /* 8px */
}

.ejercicio-imagen {
  flex-shrink: 0;
  width: 100%; /* La imagen puede ocupar el ancho completo del contenedor */
  max-width: 10rem; /* Pero con un m√°ximo para no ser gigante */
  height: auto; /* Mantener proporci√≥n */
  display: flex;
  justify-content: center;
  align-items: center;
}

.ejercicio-imagen img {
  max-width: 100%;
  height: auto; /* Ajusta la altura autom√°ticamente para mantener la proporci√≥n */
  object-fit: contain; /* Para que la imagen se ajuste sin recortarse */
  border-radius: var(--border-radius-sm); /* 6px */
}

/* ------------------------------------------- */
/* Estilos para la p√°gina de "crear.html" */
/* ------------------------------------------- */

.crear-layout {
  display: flex;
  flex-direction: column; /* Por defecto, apila para m√≥vil */
  gap: var(--space-xl); /* 24px */
  align-items: center; /* Centra los elementos apilados */
  margin-top: var(--space-xl); /* 24px */
  width: 100%; /* Ocupa todo el ancho disponible */
  box-sizing: border-box;
  flex-grow: 1; /* Permite que el crear-layout crezca y ocupe el espacio disponible */
  /* NOTA: Eliminamos max-width y margin: auto aqu√≠ para que crezca libremente dentro de .contenido */
}

.formulario {
  display: grid;
  grid-template-columns: 1fr; /* Una sola columna por defecto (m√≥vil) */
  gap: var(--space-md); /* 16px */
  max-width: 100%; /* Ocupa todo el ancho disponible */
  background: var(--background-white);
  padding: var(--space-xl); /* 24px */
  border-radius: var(--border-radius-md);
  box-shadow: 0 0.375rem 0.9375rem var(--shadow-light); /* 6px 15px */
  flex-grow: 1; /* Permite que ocupe el espacio disponible */
  box-sizing: border-box;
}

.formulario label {
  font-weight: 600;
  color: var(--primary-color);
  align-self: center;
  font-size: 1.05rem; /* 16.8px */
  text-align: left; /* Alinea las etiquetas a la izquierda */
}

.formulario input,
.formulario select,
.formulario textarea {
  width: 100%;
  padding: 0.625rem 0.75rem; /* 10px 12px */
  border-radius: var(--border-radius-sm);
  border: 0.0625rem solid var(--border-color); /* 1px */
  font-size: 1rem;
  box-sizing: border-box;
}

.formulario textarea {
  resize: vertical;
  min-height: 5rem; /* 80px */
}

.formulario input:focus,
.formulario select:focus,
.formulario textarea:focus {
  border-color: var(--secondary-color);
  outline: none;
  box-shadow: 0 0 0 0.125rem rgba(52, 152, 219, 0.2); /* 2px */
}

.formulario button[type="submit"] {
  grid-column: 1 / -1; /* Ocupa todas las columnas disponibles */
  margin-top: var(--space-xl); /* 24px */
  padding: 0.75rem 1.5625rem; /* 12px 25px */
  font-size: 1.1rem;
  background: var(--primary-color);
  color: white;
  border: none;
  border-radius: var(--border-radius-sm);
  cursor: pointer;
  width: 100%; /* Asegura que el bot√≥n ocupe todo el ancho */
  box-sizing: border-box;
}

#mensaje {
  text-align: center;
  margin-top: var(--space-xl); /* 24px */
  padding: var(--space-md) var(--space-lg); /* 16px 20px */
  border-radius: var(--border-radius-sm);
  font-weight: bold;
  color: var(--text-color);
  font-size: 0.95rem;
}

#mensaje.success {
  background-color: #d4edda;
  color: #155724;
  border: 0.0625rem solid #c3e6cb; /* 1px */
}

#mensaje.error {
  background-color: #f8d7da;
  color: #721c24;
  border: 0.0625rem solid #f5c6cb; /* 1px */
}

/* ------------------------------------------- */
/* Estilos para el editor de Canvas */
/* ------------------------------------------- */

.miniatura-campo {
  cursor: pointer;
  transition: transform 0.2s;
  width: 100%; /* Ocupa el 100% del espacio disponible de su padre en movil */
  height: auto; /* Altura autom√°tica */
  aspect-ratio: 16 / 9; /* Mantener una proporci√≥n com√∫n para la previsualizaci√≥n del canvas */
  box-shadow: 0 0.125rem 0.375rem var(--shadow-medium);
  border-radius: var(--border-radius-md);
  background-color: var(--background-white);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  flex-shrink: 0;
  box-sizing: border-box;
  flex-grow: 1; /* Permitir que crezca */
  min-width: 18.75rem; /* Ancho m√≠nimo para m√≥vil antes de escalar */
}

.miniatura-campo p {
  font-size: 1rem;
  margin-bottom: var(--space-sm); /* 12px */
}

#mini-canvas {
  width: 100%;
  height: auto;
  display: block;
  image-rendering: auto; /* o 'crisp-edges' si prefieres look menos borroso en escalas impares */
}

.miniatura-campo:hover {
  transform: scale(1.02);
}

#canvas-container {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.85);
  justify-content: center;
  align-items: center;
  z-index: 1000;
  flex-direction: column;
  padding: 2rem; /* Margen alrededor del canvas */
  box-sizing: border-box;
  overflow: hidden; /* üî• Elimina el scroll */
}

/*
#canvas-container canvas {
  background: white;
  border-radius: var(--border-radius-md); 
  box-shadow: 0 0 0.625rem var(--shadow-dark);
  image-rendering: auto;
  max-width: 100vw; 
  max-height: 100vh; 
  width: 100%; 
  height: 100%; 
  object-fit: contain; 
  display: block;

}*/
#canvas-container canvas {
  background: transparent; /* antes: white */
  border-radius: var(--border-radius-md);
  box-shadow: 0 0 0.625rem var(--shadow-dark);
  display: block;
  max-width: 95vw; /* l√≠mites por si hay pantallas raras */
  max-height: 90vh;
  width: auto; /* NO forzar 100% */
  height: auto; /* NO forzar 100% */
}

.canvas-buttons-modern {
  display: flex;
  flex-direction: column; /* Apila los botones del canvas por defecto */
  justify-content: center; /* Centra el contenido */
  align-items: center;
  background: #2f3e46;
  padding: var(--space-md); /* 16px */
  border-radius: var(--border-radius-lg); /* 20px */
  margin-top: var(--space-xl); /* 24px */
  height: auto; /* Altura autom√°tica */
  width: calc(
    100vw - (2 * var(--space-xl))
  ); /* Ocupa casi todo el ancho, dejando margen */
  max-width: 60rem; /* 960px, con un m√°ximo razonable */
  box-sizing: border-box;
  gap: var(--space-md); /* Espacio entre secciones apiladas */
}

.tools-left,
.tools-right,
.tools-center {
  display: flex;
  align-items: center;
  justify-content: center; /* Centra los iconos en m√≥vil */
  gap: var(--space-md); /* 16px */
  flex-wrap: wrap; /* Permite que los iconos se envuelvan */
  width: 100%; /* Ocupa todo el ancho en su secci√≥n */
}

.tools-left button {
  background: #354f52;
  border: none;
  color: white;
  font-size: 1.375rem; /* 22px */
  padding: var(--space-md); /* 16px */
  border-radius: 50%;
  cursor: pointer;
  width: 3.125rem; /* 50px */
  height: 3.125rem; /* 50px */
  flex-shrink: 0;
}

.tools-left button:hover {
  background: #52796f;
}

.tools-right .cerrar,
.tools-right .guardar {
  background-color: var(--danger-color); /* Rojo por defecto */
  color: white;
  padding: 0.75rem 1.25rem; /* 12px 20px */
  font-size: 1rem; /* 16px */
  border: none;
  border-radius: var(--border-radius-md); /* 10px */
  cursor: pointer;
  flex-shrink: 0;
  width: 100%; /* Ocupa todo el ancho en su secci√≥n */
  max-width: 10rem; /* Pero con un m√°ximo razonable */
}

.tools-right .guardar {
  background-color: var(--success-color);
}

.tools img {
  width: 3.4375rem; /* 55px */
  height: 4.0625rem; /* 65px */
  object-fit: contain;
  cursor: grab;
}

.toolbox img:hover {
  transform: scale(1.1);
}

.tools.hidden {
  display: none !important;
}

#text-overlays {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
}

.text-box {
  position: absolute;
  min-width: 5rem; /* 80px */
  min-height: 1.875rem; /* 30px */
  padding: 0.375rem 0.625rem; /* 6px 10px */
  border: 0.0625rem solid #333; /* 1px */
  background: rgba(9, 148, 9, 0.9);
  font-size: 1rem; /* 16px */
  font-family: Arial, sans-serif;
  pointer-events: all;
  cursor: move;
  resize: both;
  overflow: auto;
  color: white;
}

.text-box .delete-text-btn {
  position: absolute;
  top: 0;
  right: 0;
  background: red;
  color: white;
  border: none;
  border-radius: 50%;
  width: 1.25rem; /* 20px */
  height: 1.25rem; /* 20px */
  font-size: 0.875rem; /* 14px */
  display: none;
  cursor: pointer;
  z-index: 100;
  line-height: 1.25rem;
  text-align: center;
}

.text-box:hover .delete-text-btn {
  display: block;
}

.tool-button {
  background-color: transparent;
  border: none;
  padding: 0.3125rem; /* 5px */
  margin: 0 0.3125rem; /* 0 5px */
  border-radius: var(--border-radius-md); /* 10px */
  cursor: pointer;
  transition: background-color 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.tool-button:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

.tool-button img {
  width: 5rem; /* 80px */
  height: 5rem; /* 80px */
  object-fit: contain;
  filter: drop-shadow(0 0 0.125rem black); /* 2px */
}

.punto-flecha {
  width: 0.9375rem; /* 15px */
  height: 0.9375rem; /* 15px */
  background: red;
  position: absolute;
  border-radius: 50%;
  cursor: move;
  z-index: 1000;
}

#flecha-puntos-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 3;
}

#flecha-puntos-container .punto-flecha {
  width: 1rem; /* 16px */
  height: 1rem; /* 16px */
  background-color: red;
  border-radius: 50%;
  position: absolute;
  cursor: pointer;
  pointer-events: auto;
  z-index: 10;
}

.leader-line {
  z-index: 2000 !important;
  pointer-events: none;
}

.leader-line.ocultar-flecha {
  display: none !important;
}

/* --- MEDIA QUERIES RESPONSIVE --- */

/* Para tablets y pantallas de escritorio peque√±as (769px a 1200px) */
@media (min-width: 769px) {
  .layout {
    flex-direction: row; /* Sidebar a la izquierda, contenido a la derecha */
  }

  .sidebar {
    width: 13.75rem; /* 220px, ancho fijo para desktop m√°s peque√±o */
    min-width: 10rem; /* 160px */
    max-width: 16.25rem; /* 260px */
    text-align: left; /* Alinea el texto a la izquierda */
    padding: var(--space-lg) var(--space-md); /* 20px 16px */
  }

  .sidebar ul {
    flex-direction: column; /* Vuelve a apilar los elementos del men√∫ */
    align-items: flex-start; /* Alinea a la izquierda */
    gap: var(--space-md); /* Espacio vertical */
  }

  .sidebar a {
    padding: 0; /* Elimina el padding extra para los elementos de la lista */
    display: inline; /* Para que se vean como enlaces normales */
  }

  .topbar-content {
    flex-direction: row; /* T√≠tulo y bot√≥n de logout en una fila */
    justify-content: space-between;
    align-items: center;
    padding: 0 var(--space-lg); /* M√°s padding horizontal */
  }

  .topbar-content h1 {
    margin: 0; /* Elimina el margen inferior */
  }

  .contenido {
    padding: var(--space-xl); /* 24px, padding est√°ndar para desktop */
    /* Eliminamos max-width aqu√≠ para que se estire al 100% del main */
    max-width: 100%;
    margin: 0; /* Eliminar margin auto si max-width es 100% */
  }

  #filtros {
    flex-direction: row; /* Los filtros vuelven a estar en una fila */
    justify-content: flex-start;
    align-items: center;
    flex-wrap: wrap; /* Asegura que se envuelvan si no caben */
    gap: var(--space-lg); /* 20px */
  }

  #filtros select,
  #filtros input {
    width: auto; /* Ancho autom√°tico para no forzar el 100% */
    max-width: 15rem; /* L√≠mite para que no sean demasiado grandes */
  }

  #filtros button {
    width: auto; /* Ancho autom√°tico */
    max-width: none;
  }

  #lista-ejercicios {
    /* Auto-fit intentar√° ajustar tantas columnas de 28rem como sea posible, y 1fr para que se estiren */
    grid-template-columns: repeat(
      auto-fit,
      minmax(22rem, 1fr)
    ); /* 352px m√≠nimo */
  }

  .ejercicio-contenido {
    flex-direction: row; /* Texto e imagen lado a lado */
    text-align: left;
    gap: var(--space-lg); /* 20px */
  }

  .ejercicio-imagen {
    width: 10rem; /* 160px */
    height: 7.5rem; /* 120px */
    max-width: 10rem; /* Mantiene el tama√±o fijo para la imagen */
  }

  .crear-layout {
    flex-direction: row; /* Formulario y miniatura lado a lado */
    align-items: flex-start; /* Mantenemos flex-start para que el formulario no se estire forzosamente */
    justify-content: space-between; /* Distribuye el espacio entre los elementos, no alrededor */
    gap: var(--space-xxxl); /* 48px */
    height: auto; /* Permitir que la altura se ajuste seg√∫n el contenido */
    flex-grow: 1; /* Permitir que crezca en el espacio vertical dentro de .contenido */
    width: 100%; /* Asegurar que ocupe todo el ancho disponible del padre */
    /* Ya no hay max-width ni margin-left/right auto aqu√≠, se estira al 100% del .contenido */
  }

  .formulario {
    grid-template-columns: 1fr 2fr; /* 1 columna estrecha para labels, 2 para inputs */
    gap: var(--space-lg) var(--space-xxl); /* 20px 32px */
    max-width: 55rem; /* 880px - Aumentado, para permitir m√°s ancho */
    flex-basis: 45rem; /* Darle un ancho base razonable */
    flex-grow: 1; /* Permitir que el formulario crezca */
    flex-shrink: 1; /* Permitir que el formulario se encoja si es necesario */
    padding: var(--space-xxxl); /* 48px */
  }

  .formulario button[type="submit"] {
    grid-column: 1 / -1; /* Ocupa todas las columnas */
  }

  .miniatura-campo {
    width: auto; /* Eliminar ancho fijo */
    height: auto; /* Eliminar alto fijo */
    max-width: none; /* Permitir que crezca m√°s all√° del max-width anterior */
    flex-grow: 1; /* Permitir que ocupe el espacio restante */
    flex-basis: 30rem; /* Aumentar el ancho base a 480px */
    min-height: 15rem; /* Altura m√≠nima para asegurar visibilidad */
  }

  .canvas-buttons-modern {
    flex-direction: row; /* Los botones del canvas vuelven a estar en una fila */
    justify-content: space-between;
    height: 5rem; /* 80px */
    padding: 0.625rem 2.5rem; /* 10px 40px */
    width: calc(
      100vw - (2 * var(--space-xxl)) - 16.25rem
    ); /* C√°lculo m√°s complejo para la barra lateral */
    max-width: 93.75rem; /* 1500px, un buen m√°ximo */
  }

  .tools-left,
  .tools-right,
  .tools-center {
    justify-content: flex-start; /* Alinea los iconos a la izquierda en sus secciones */
    flex-wrap: nowrap; /* Evita que los iconos se envuelvan si hay espacio */
    width: auto; /* Ancho autom√°tico */
  }

  .tools-right .cerrar,
  .tools-right .guardar {
    width: auto; /* Ancho autom√°tico */
    max-width: none;
  }
}

/* Para pantallas muy grandes (mayor de 1200px) */
@media (min-width: 1201px) {
  body {
    font-size: 1.05rem; /* Ligeramente m√°s grande para una mejor legibilidad */
  }

  .sidebar {
    width: 16.25rem; /* 260px, un poco m√°s ancha */
    min-width: 16.25rem;
    max-width: 18.75rem; /* 300px */
  }

  .contenido {
    /* Aqu√≠ permitimos que .contenido ocupe todo el ancho disponible */
    max-width: 100%;
  }

  #lista-ejercicios {
    grid-template-columns: repeat(
      auto-fit,
      minmax(25rem, 1fr)
    ); /* Columnas un poco m√°s grandes */
    gap: var(--space-xxl); /* M√°s espacio entre tarjetas */
  }

  .formulario {
    max-width: 70rem; /* 1120px - Aumentado significativamente para pantallas grandes */
    flex-basis: 50rem; /* Un flex-basis a√∫n mayor */
  }

  .miniatura-campo {
    min-height: 20rem; /* Mayor altura m√≠nima para pantallas muy grandes */
    flex-basis: 35rem; /* Aumentar el ancho base de la miniatura */
  }

  .canvas-buttons-modern {
    max-width: 100rem; /* 1600px, permite que sea m√°s ancho en pantallas muy grandes */
  }
}

/* Para pantallas con una altura peque√±a (√∫til para laptops con baja resoluci√≥n vertical) */
@media (max-height: 800px) {
  .canvas-buttons-modern {
    margin-top: var(--space-md); /* Reducir margen superior */
  }
  #canvas-container canvas {
    max-height: 70vh; /* Reduce a√∫n m√°s la altura m√°xima del canvas */
  }
  .tools-left button,
  .tools-right .cerrar,
  .tools-right .guardar {
    padding: var(--space-xs); /* Reducir padding de botones */
    font-size: 0.8rem;
    width: 2.5rem;
    height: 2.5rem;
  }
  .tools img,
  .tool-button img {
    width: 2.5rem; /* 40px */
    height: 2.5rem; /* 40px */
  }
  .canvas-buttons-modern {
    padding: var(--space-xs);
  }
  .tools-left,
  .tools-right,
  .tools-center {
    gap: var(--space-xs);
  }
}

:root {
  --primary-color: #2c3e50;
  --secondary-color: #3498db;
  --accent-color: #ecf0f1;
  --danger-color: #c0392b;
  --success-color: #2ecc71;

  --text-color: #333;
  --background-light: #f4f4f4;
  --background-white: #fff;

  --border-color: #ccc;
  --shadow-light: rgba(0, 0, 0, 0.05);
  --shadow-medium: rgba(0, 0, 0, 0.1);

  --space-xxs: 0.25rem;
  --space-xs: 0.5rem;
  --space-sm: 0.75rem;
  --space-md: 1rem;
  --space-lg: 1.25rem;
  --space-xl: 1.5rem;
  --space-xxl: 2rem;
  --space-xxxl: 3rem;
  --border-radius-sm: 5px;
  --border-radius-md: 10px;
  --border-radius-lg: 20px;
}

/* Reset base que ya ten√≠as */
body {
  font-family: "Segoe UI", sans-serif;
  margin: 0;
  background: var(--background-light);
  color: var(--text-color);
}

/* ===================== TOPNAV GLOBAL ===================== */
.topnav {
  position: sticky;
  top: 0;
  z-index: 50;
  display: grid;
  grid-template-columns: 220px 1fr 220px;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-sm) var(--space-xl);
  background: var(--background-white);
  box-shadow: 0 2px 6px var(--shadow-light);
}

.topnav-left {
  display: flex;
  align-items: center;
}
.app-logo {
  font-weight: 800;
  letter-spacing: 0.5px;
  text-decoration: none;
  color: #d23b3b; /* logo en rojo como tu dibujo */
  font-size: 1.25rem;
}

.topnav-center ul {
  list-style: none;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: var(--space-lg);
  padding: 0;
  margin: 0;
}
.topnav-center a {
  text-decoration: none;
  color: var(--primary-color);
  font-weight: 600;
  padding: 0.35rem 0.75rem;
  border-radius: 8px;
}
.topnav-center a.active,
.topnav-center a:hover {
  background: var(--accent-color);
}

.topnav-right {
  display: flex;
  justify-content: flex-end;
  align-items: center;
}
.profile-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 2px solid var(--primary-color);
  background: transparent;
  cursor: pointer;
}

/* Responsive del topbar */
@media (max-width: 820px) {
  .topnav {
    grid-template-columns: 1fr auto;
    grid-template-areas: "logo profile" "menu menu";
    row-gap: 0.5rem;
  }
  .topnav-left {
    grid-area: logo;
  }
  .topnav-center {
    grid-area: menu;
  }
  .topnav-right {
    grid-area: profile;
  }
}

/* ===================== LAYOUT DE ESTA P√ÅGINA ===================== */
.page {
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: var(--space-xl);
  padding: var(--space-xl);
}

@media (max-width: 900px) {
  .page {
    grid-template-columns: 1fr;
  }
}

/* Lateral de filtros */
.filters-aside {
  background: var(--background-white);
  padding: var(--space-lg);
  border-radius: var(--border-radius-md);
  box-shadow: 0 2px 8px var(--shadow-light);
  align-self: start;
}
.filters-aside h2 {
  margin: 0 0 var(--space-md) 0;
}

/* Reusa tus estilos de #filtros, solo retoques para lateral */
#filtros {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}
#filtros label {
  font-weight: 600;
}
#filtros select,
#filtros input {
  padding: 0.5rem;
  border: 1px solid var(--border-color);
  border-radius: 8px;
}
#filtros button {
  margin-top: 0.5rem;
  background: var(--primary-color);
  color: #fff;
  border: none;
  padding: 0.6rem 0.9rem;
  border-radius: 8px;
  cursor: pointer;
}

/* √Årea principal */
.content-main .page-title {
  margin: 0 0 var(--space-lg) 0;
}

/* Grid 2 columnas fijo en escritorio (como dibujaste) */
.ejercicios-grid {
  display: grid;
  gap: var(--space-xl);
}
@media (min-width: 900px) {
  .ejercicios-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

/* Tarjetas de ejercicio: reuso de tus clases */
.ejercicio {
  background: var(--background-white);
  padding: var(--space-lg);
  border-radius: var(--border-radius-md);
  box-shadow: 0 2px 10px var(--shadow-medium);
  transition: transform 0.2s ease;
  cursor: pointer;
}
.ejercicio:hover {
  transform: scale(1.02);
}
.ejercicio-contenido {
  display: flex;
  gap: var(--space-lg);
  align-items: center;
}
.ejercicio-texto h3 {
  margin: 0.25rem 0;
}
.ejercicio-imagen {
  width: 10rem;
  height: 7.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
}
.ejercicio-imagen img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  border-radius: 6px;
}

/* Mobile: una columna y tarjeta vertical */
@media (max-width: 600px) {
  .ejercicio-contenido {
    flex-direction: column;
    text-align: center;
  }
  .ejercicio-imagen {
    width: 100%;
    height: auto;
  }
}
.app-logo {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  text-decoration: none;
  color: #d23b3b;
  font-weight: 800;
  font-size: 1.25rem;
}
.app-logo img {
  width: 28px;
  height: 28px;
  display: block; /* 24‚Äì32px va perfecto */
}
@media (max-width: 480px) {
  /* En m√≥viles muy peque√±os, muestra solo el icono y oculta el texto si hace falta */
  .app-logo span {
    display: none;
  }
}

/* ---------------------------------------  */

/* Tarjeta de previsualizaci√≥n derecha */
.preview-card {
  position: sticky;
  top: calc(var(--space-xl) + 56px ); /* bajo el header */
  align-self: flex-start;
  background: var(--background-white);
  border-radius: var(--border-radius-md);
  box-shadow: 0 6px 18px var(--shadow-light);
  padding: var(--space-md);
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
  max-width: 32rem;
}

.preview-card__header {
  display: flex;
  justify-content: center;
  align-items: center;
}
.preview-card h3 {
  margin: 0;
  font-size: 1rem;
  color: var(--primary-color);
}

.btn-secondary {
  background: var(--accent-color);
  border: 1px solid var(--border-color);
  padding: 0.5rem 0.75rem;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
}

/* Ajustes de layout para desktop */
@media (min-width: 900px) {
  .crear-layout {
    align-items: flex-start;
  }
  .preview-card {
    width: min(34rem, 100%);
  }
}

/* Micro-hints */
.preview-hint {
  margin: 0;
  font-size: 0.85rem;
  color: #667;
  text-align: center;
}

/* Grupos del formulario */
.form-group-title {
  grid-column: 1 / -1;
  margin: var(--space-md) 0 var(--space-sm);
  font-weight: 800;
  color: #0f331b;
  font-size: 1.05rem;
  border-bottom: 1px solid var(--accent-color);
  padding-bottom: 0.25rem;
}
/* === AJUSTE DE ALTURA Y COMPACTADO DE CREAR.HTML === */

/* Sube toda la secci√≥n principal m√°s cerca del topbar */
.content-main {
  padding-top: 0.5rem !important;   /* antes 1.5rem */
}

/* Sube el bloque que contiene formulario y previsualizaci√≥n */
.crear-layout {
  margin-top: 0 !important;         /* elimina el gran margen superior */
  gap: var(--space-lg);             /* espacio moderado entre formulario y preview */
  align-items: flex-start;
}

/* Compacta el formulario un poco (sin hacerlo peque√±o) */
.formulario {
  padding: var(--space-lg);         /* antes var(--space-xl) */
  gap: var(--space-sm);             /* menos espacio entre filas */
}

/* Reduce un poco el espacio de los t√≠tulos */
.form-group-title {
  margin: var(--space-xs) 0 var(--space-xs);
}

/* Compacta la tarjeta de previsualizaci√≥n y s√∫bela m√°s */
.preview-card {
  top: calc(var(--space-sm) + 48px); /* antes calc(var(--space-xl) + 56px) */
  padding: var(--space-sm);
  gap: var(--space-sm);
}

/* === UNIFICAR ESTILO DEL FORMULARIO === */
.formulario {
  font-family: "Segoe UI", sans-serif; /* igual que el body */
  font-size: 1rem;                     /* tama√±o base uniforme */
  color: var(--text-color);            /* color de texto general */
  line-height: 1.4;
}

/* Etiquetas (t√≠tulos de campo) */
.formulario label {
  font-weight: 700;                    /* negrita solo en los t√≠tulos */
  color: var(--text-color);            /* mismo color que los campos */
  font-size: 1rem;                     /* igual tama√±o que inputs */
}

/* Inputs, selects y textarea */
.formulario input,
.formulario select,
.formulario textarea {
  font-family: inherit;                /* misma tipograf√≠a */
  font-size: inherit;                  /* mismo tama√±o */
  color: inherit;                      /* mismo color */
  font-weight: 400;                    /* normal */
}



