<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- ICONOS Y COLOR DEL NAVEGADOR -->
    <link
      rel="icon"
      type="image/png"
      href="img/favicon-proyecto.png"
      sizes="32x32"
    />
    <link
      rel="icon"
      type="image/png"
      href="img/favicon-proyecto-192.png"
      sizes="192x192"
    />
    <link
      rel="apple-touch-icon"
      href="img/favicon-proyecto-180.png"
      sizes="180x180"
    />
    <meta name="theme-color" content="#0f331b" />

    <title>Crear Ejercicio</title>
    <link rel="stylesheet" href="css/styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/leader-line@1.0.7/leader-line.min.js"></script>
  </head>
  <body>
    <!-- TOPBAR GLOBAL -->
    <header class="topnav">
      <div class="topnav-left">
        <a class="app-logo" href="listaEjercicios.html">
          <img src="img/favicon-proyecto.png" alt="Logo CoachFutbol" />
          <span>COACHFUTBOL</span>
        </a>
      </div>
      <nav class="topnav-center">
        <ul>
          <li><a href="listaEjercicios.html">Lista de Ejercicios</a></li>
          <li><a href="crear.html" class="active">Crear ejercicio</a></li>
          <li><a href="#">Mi Espacio</a></li>
          <li><a href="#">Ayuda</a></li>
        </ul>
      </nav>
      <div class="topnav-right">
        <button class="profile-btn" title="Perfil"></button>
      </div>
    </header>

    <!-- CONTENIDO DE P√ÅGINA -->
    <main class="content-main" style="padding: 1.5rem">
      <!--<header class="page-header">
      <h1 class="page-title">Crear nuevo ejercicio</h1> 
    </header>-->

      <section class="contenido">
        <div class="crear-layout">
          <!-- FORMULARIO -->
          <form id="form-ejercicio" class="formulario" autocomplete="off">
            <!-- Grupo: Informaci√≥n b√°sica -->
            <h4 class="form-group-title">Informaci√≥n b√°sica</h4>

            <label for="titulo">T√≠tulo:</label>
            <input type="text" id="titulo" name="titulo" required />

            <label for="descripcion">Descripci√≥n:</label>
            <textarea
              id="descripcion"
              name="descripcion"
              rows="3"
              required
            ></textarea>

            <!-- Grupo: Clasificaci√≥n -->
            <h4 class="form-group-title">Clasificaci√≥n</h4>

            <label for="tipo">Tipo de ejercicio:</label>
            <select id="tipo" name="tipo" required>
              <option value="t√©cnico">T√©cnico</option>
              <option value="t√°ctico">T√°ctico</option>
              <option value="f√≠sico">F√≠sico</option>
            </select>

            <label for="dificultad">Dificultad:</label>
            <select id="dificultad" name="dificultad">
              <option value="F√°cil">F√°cil</option>
              <option value="Media">Media</option>
              <option value="Dif√≠cil">Dif√≠cil</option>
            </select>

            <label for="edadRecomendada">Edad recomendada:</label>
            <input
              type="text"
              id="edadRecomendada"
              name="edadRecomendada"
              placeholder="ej: U14, 13, U16"
            />

            <!-- Grupo: Detalles -->
            <h4 class="form-group-title">Detalles</h4>

            <label for="objetivos">Objetivos (separados por coma):</label>
            <input
              type="text"
              id="objetivos"
              name="objetivos"
              placeholder="ej: conducci√≥n, pase, finalizaci√≥n"
            />
            <!--<small class="hint">Escribe los objetivos separados por coma.</small> -->

            <label for="duracion">Duraci√≥n:</label>
            <input
              type="text"
              id="duracion"
              name="duracion"
              placeholder="ej: 15 min"
            />

            <label for="material">Material necesario:</label>
            <input
              type="text"
              id="material"
              name="material"
              placeholder="ej: conos, balones, picas"
            />
            <!-- <small class="hint">Tambi√©n separado por coma si hay varios.</small> -->

            <label for="numeroJugadores">N√∫mero de jugadores:</label>
            <input
              type="number"
              id="numeroJugadores"
              name="numeroJugadores"
              min="1"
              step="1"
            />

            <!-- Grupo: Autor -->
            <!--
          <h4 class="form-group-title">Autor</h4>

          <label for="autor">Nombre del autor:</label>
          <input type="text" id="autor" name="autor" required />
          -->

            <input type="hidden" id="imagen-ejercicio" name="archivoUrl" />
            <button type="submit">Guardar ejercicio</button>
          </form>

          <!-- TARJETA DE PREVISUALIZACI√ìN -->
          <aside class="preview-card">
            <div class="preview-card__header">
              <h3>Previsualizaci√≥n</h3>
            </div>

            <div class="miniatura-campo">
              <!-- El tama√±o real lo ajusta JS con syncMiniCanvasResolution() -->
              <canvas id="mini-canvas"></canvas>
            </div>

            <p class="preview-hint">
              La previsualizaci√≥n se actualiza al guardar desde la pizarra.
            </p>
          </aside>
        </div>

        <!-- MODAL PIZARRA -->
        <div id="canvas-container">
          <canvas id="canvas" width="800" height="400"></canvas>

          <!-- Contenedor para puntos de flechas -->
          <div id="flecha-puntos-container"></div>

          <!-- Textos sobre el campo -->
          <div id="text-overlays"></div>

          <button
            id="eliminar-objeto"
            style="display: none; position: absolute; z-index: 10"
          >
            üóë Eliminar
          </button>

          <div class="canvas-buttons-modern">
            <!-- Zona izquierda: categor√≠as -->
            <div class="tools-left">
              <button onclick="mostrarGrupo('personas')" type="button">
                üë•
              </button>
              <button onclick="mostrarGrupo('materiales')" type="button">
                üèóÔ∏è
              </button>
              <button onclick="mostrarGrupo('texto')" type="button">‚úçÔ∏è</button>
            </div>

            <!-- Zona central: herramientas activas -->
            <div class="tools-center">
              <div id="grupo-personas" class="tools hidden">
                <img src="img/jugadora1.png" draggable="true" />
                <img src="img/jugadora2.png" draggable="true" />
                <img src="img/jugador1.png" draggable="true" />
                <img src="img/jugador2.png" draggable="true" />
              </div>

              <div id="grupo-materiales" class="tools hidden">
                <img src="img/balon.png" draggable="true" />
                <img src="img/cono.png" draggable="true" />
                <img src="img/cono-chincheta.png" draggable="true" />
                <img src="img/valla.png" draggable="true" />
                <img src="img/escalera.png" draggable="true" />
                <img src="img/escaleraLateral.png" draggable="true" />
                <img src="img/aro.png" draggable="true" />
                <img src="img/posta.png" draggable="true" />
                <img src="img/barrera.png" draggable="true" />
                <img src="img/porteria.png" draggable="true" />
              </div>

              <div id="grupo-texto" class="tools hidden">
                <button id="add-text-btn" class="tool-button" type="button">
                  <img src="img/text-icon.png" alt="Texto" draggable="false" />
                </button>
              </div>
            </div>

            <!-- Zona derecha: acciones -->
            <div class="tools-right">
              <button class="cerrar" type="button" onclick="cerrarPizarra()">
                Cerrar
              </button>
              <button class="guardar" type="button" onclick="guardarDiseno()">
                Guardar
              </button>
            </div>
          </div>
        </div>

        <p id="mensaje"></p>
      </section>
    </main>

    <script src="js/crear.js"></script>
    <script src="js/canvasEditor.js"></script>
  </body>
</html>
